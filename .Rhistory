knitr::opts_chunk$set(echo = TRUE)
heartSutra <- c("舍利子，色不異空，空不異色；色即是空，空即是色。")
str_view_all(heartSutra,"色") # 檢視
install.packages("htmlwidgets")
heartSutra <- c("舍利子，色不異空，空不異色；色即是空，空即是色。")
str_view_all(heartSutra,"色") # 檢視
install.packages("htmlwidgets")
install.packages("htmlwidgets")
knitr::opts_chunk$set(echo = TRUE)
install.packages("htmlwidgets")
heartSutra <- c("舍利子，色不異空，空不異色；色即是空，空即是色。")
str_view_all(heartSutra,"色") # 檢視
install.packages("htmlwidgets")
install.packages("htmlwidgets")
knitr::opts_chunk$set(echo = TRUE)
studentIds <- c("410873029","410773005","410772035","410562123")
# 取出學號中的入學屆為107或108
str_view_all(studentIds,"(107|108)")
knitr::opts_chunk$set(echo = TRUE)
CDC_chatbox <- readr::read_csv("http://od.cdc.gov.tw/pr/CDC_chatbox.csv")
jsonlite::fromJSON("https://www.dropbox.com/s/3uijub7xheib405/list_victimAges_female.json?dl=1", simplifyDataFrame = F) -> list_victimAges_female
example <- list(
name=c("小明","小花","小新","美美"),
height=c(175,166,170,160),
weight=c(77,NA,60,43),
birthday=lubridate::ymd(c("1998-03-11","1999-12-22","1995-08-22","2001-10-10")),
hobby=c("美食 旅遊","旅遊 時尚","3C 美食","音樂 旅遊"),
residence=c("Taipei","New Taipei","Taichung","Kaohsiung"),
allowance=factor(c("0-1000","1001-2000","2000+","1001-2000")),
bloodType=c("A","B","B","O")
)
str(example)
pick_above170 <- example$height >= 170
pick_bloodB <- example$bloodType == "B"
pick_loveFood <-
stringr::str_detect(example$hobby,"美食")
pick_na <- is.na(example$weight)
pick_after98 <-
example$birthday >= lubridate::ymd("1998-01-01")
set_TaipeiMetro <- c("Taipei","New Taipei")
pick_fromTaipeiMetro <-
example$residence %in% set_TaipeiMetro
example$name[
pick_after98 & pick_fromTaipeiMetro & pick_bloodB
]
library(stringr)
library(glue)
str_sub("410873002", 5, 6)
str_extract_all(
c("民國108年12月5日","民國98年10月5日"),
"(?<=民國)[0-9]{2,3}(?=年)"
) # 回傳list
str_extract(
c("民國108年12月5日","民國98年10月5日"),
"(?<=民國)[0-9]{2,3}(?=年)"
) # 回傳vector
heartSutra <- c("舍利子，色不異空，空不異色；色即是空，空即是色。")
str_view_all(heartSutra,"色") # 檢視
str_count(heartSutra,"色") # 計數
library(stringr)
library(glue)
studentIds <- c("410873029","410773005","410772035","410562123")
# 取出學號中的入學屆為107或108
str_view_all(studentIds,"(107|108)")
str_view_all(studentIds, "107|108") # 可不寫()
# 是否來自107或108學屆
str_detect(studentIds, "107|108")
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr); library(purrr); library(magrittr)
View(params)
View(check_regexRestriction)
View(check_regexRestriction)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
source("https://www.dropbox.com/s/aow5y2772r8ratb/regexPatternCheck.R?dl=1", encoding = "UTF-8")
jsonlite::fromJSON("https://www.dropbox.com/s/8wgdef4v44k1w0g/tpe_highSchools.json?dl=1") -> tpe_highSchools
tpe_highSchools <- factor(tpe_highSchools)
# tpe_highSchools
tpe_highSchools
# tpe_highSchools
tpe_highSchools=levels("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
# tpe_highSchools
tpe_highSchools=factor(tpe_highschool.levels("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學")
tpe_highSchools
# tpe_highSchools
tpe_highSchools=factor(tpe_highschool.levels("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學"))
# tpe_highSchools
tpe_highSchools=factor(tpe_highschool,levels.c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學"))
# tpe_highSchools
tpe_highSchools=factor(tpe_highschool,c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學"))
# tpe_highSchools
tpe_highSchools=factor(tpe_highschool,levels=c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學"))
# tpe_highSchools
tpe_highSchools=factor(tpe_highSchools,levels=c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學"))
tpe_highSchools
# tpe_highSchools
tpe_highSchools=factor(tpe_highSchools,levels=c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學"))
tpe_highSchools
jsonlite::fromJSON("https://www.dropbox.com/s/7myzzdnoor21hye/courseStructure2.json?dl=1") -> courseStructure
source("https://www.dropbox.com/s/pc8qg2phs3ypcr8/midterm108_2.R?dl=1", encoding="UTF-8")
View(check_regexRestriction)
View(check_regexRestriction)
View(courseStructure)
View(courseStructure)
# majorGradeCombos
majorGradeCombos=c(source[[應修系級]])
# majorGradeCombos
majorGradeCombos=c(courseStructure[[應修系級]])
# majorGradeCombos
majorGradeCombos=c(courseStructure[[應修系級]][[資工系]])
# majorGradeCombos
majorGradeCombos=c(courseStructure[["應修系級"]])
# majorGradeCombos
majorGradeCombos=c(courseStructure[["應修系級"]])
majorGradeCombos
# majorGradeCombos
majorGradeCombos=c(courseStructure$"應修系級")
# majorGradeCombos
pick_courseStructure=stringr::str_detect(courseStructure$"應修系級",1)
# majorGradeCombos
pick_courseStructure=stringr::str_detect(courseStructure$"應修系級",)
# majorGradeCombos
pick_courseStructure=stringr::str_detect(courseStructure$"應修系級","系")
# majorGradeCombos
pick_courseStructure=stringr::str_detect(courseStructure$"應修系級","系")
pick_courseStructure
# majorGradeCombos
pick_courseStructure=stringr::str_detect(courseStructure$"應修系級","系1")
# majorGradeCombos
pick_courseStructure=stringr::str_detect(courseStructure$"應修系級","系1")
pick_courseStructure
# majorGradeCombos
majorGradeCombos<-"系＋[1-4]"
# majorGradeCombos
majorGradeCombos<-"系＋[1-4]"
str_view_all(majorGradeCombos)
# majorGradeCombos
majorGradeCombos<-"系＋[1-4]"
str(majorGradeCombos)
# majorGradeCombos
classes=c(courseStructure$應修系級)
majorGradeCombos<-"系＋[1-4]"
str_view_all(classes,majorGradeCombos)
# majorGradeCombos
classes=c(courseStructure$應修系級)
majorGradeCombos<-"系＋[1-4]"
str(classes,majorGradeCombos)
# majorGradeCombos
classes=c(courseStructure$應修系級)
majorGradeCombos<-"系＋[1-4]"
str_view(classes,majorGradeCombos)
# majorGradeCombos
classes=c(courseStructure$應修系級)
majorGradeCombos<-"系＋[1-4]"
str_extract(classes,majorGradeCombos)
knitr::opts_chunk$set(echo = TRUE)
phrase <- c("唧唧复唧唧")
# 目標是前面的唧唧
target_regex <- "唧唧"
pattern <- glue::glue("^{target_regex}")
print(pattern)
str_view(phrase, pattern)
# majorGradeCombos
classes=c(courseStructure$應修系級)
majorGradeCombos<-"系＋[1-4]"
str_view_all(classes,majorGradeCombos)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
View(data228)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
# data228[c("全宗名編號","年")]
data228[[5,6]]<-c("全宗名編號","年")
# data228[c("全宗名編號","年")]
data228[[c(5,6)]]<-c("全宗名編號","年")
# data228[c("全宗名編號","年")]
data228[c(5,6)]<-c("全宗名編號","年")
# data228[c("全宗名編號","年")]
data228[c(5,6)]<-c("全宗名編號","年")
# data228[c("全宗名編號","年")]
data228[c(5,6)]<-c("全宗名編號","年")
# data228[c("全宗名編號","年")]
data228[c(5,6)]<-c("全宗名編號","年")
# data228[c("全宗名編號","年")]
data228[c(5,6)]<-c("全宗名編號","年")
# data228[c("全宗名編號","年")]
data228[[5]]<-"全宗名編號"
### 2.2 人犯名單
「data228$附註」元素裡有個元素值為"表冊名稱:臺灣省二二八事變正法及死亡人犯名冊"，請依照以此表冊所屬「檔號」去找出與它有關的「個人名稱」將這些人名（不重覆的）存在victims物件裡（class character）
# data228[c("全宗名編號","年")]
data228[[5]]<-"全宗名編號"
# data228[c("全宗名編號","年")]
data228[["全宗名編號"]]<-
# data228[c("全宗名編號","年")]
data228[["全宗名編號"]]<-data228$檔號(?<=A)target_pattern(?=A)
# data228[c("全宗名編號","年")]
data228[["全宗名編號"]]<-data228$檔號,(?<=A)target_pattern(?=A)
# data228[c("全宗名編號","年")]
data228[["全宗名編號"]]<-str_extract_all(data228$檔號,(?<=A)target_pattern(?=A))
# data228[c("全宗名編號","年")]
k=data228$檔號
str(k)
data228[["全宗名編號"]]<-str_extract_all(data228$檔號,(?<=A)target_pattern(?=A))
# data228[c("全宗名編號","年")]
k=data228$檔號
str(k)
# data228[c("全宗名編號","年")]
k=data228$檔號
str(k)
data228[["全宗名編號"]]<-str_extract_all(k,(?<=A)target_pattern(?=A))
# data228[c("全宗名編號","年")]
k=data228$檔號
View(data228)
View(data228)
data228 <- readr::read_csv("https://www.dropbox.com/s/64yf3uq8wtvb5q7/%E4%BA%8C%E4%BA%8C%E5%85%AB%E4%BA%8B%E4%BB%B6%E4%BA%BA%E5%90%8D%E7%B4%A2%E5%BC%95.csv?dl=1")
# majorGradeCombos
classes=c(courseStructure$應修系級)
majorGradeCombos<-"系＋[1-4]"
str(classes,majorGradeCombos)
# majorGradeCombos
classes=c(courseStructure$應修系級)
majorGradeCombos<-"系＋[1-4]"
majorGradeCombos=unique(majorGradeCombos)
str(classes,majorGradeCombos)
View(check_regexRestriction)
# majorGradeCombos
classes=c(courseStructure$應修系級)
majorGradeCombos<-"系＋[1-4]"
majorGradeCombos=unique(majorGradeCombos)
str(majorGradeCombos)
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=unique(majorGradeCombos)
str(majorGradeCombos)
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=unique(majorGradeCombos)
(majorGradeCombos)
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=stringr::str_detect(majorGradeCombos,"系")
majorGradeCombos=unique(majorGradeCombos)
(majorGradeCombos)
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=unique(majorGradeCombos)
(majorGradeCombos)
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
str_extract_all=majorGradeCombos,"(?<=[:graph:]){1,2,3,4,5,6,7,8,9,}(?=[:digit:])"
# 目標是前面的唧唧
str_extract_all(
"我的名字8293叫17380小abce明",
"[\u4E00-\u9FFF]+")
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
(majorGradeCombos)
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
str_extract_all=majorGradeCombos,"(?<=[:graph:])(?=[:digit:])"
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,"(?<=[:graph:])(?=[:digit:])")
majorGradeCombos=unique(majorGradeCombos)
(majorGradeCombos)
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,"(?<=[:graph:])+[系|組](?=[:digit:])")
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,"(?<=[:graph:]){target_regex}(?=[:digit:])")
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,[:graph:]+(系|組)[:digit:]
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,[:graph:]+(系|組)[:digit:])
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,[:graph:]+(系|組)[:digit:])
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,[:graph:]+(系|組)[:digit:])
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,[:graph:]+(系|組)[:digit:])
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,[:graph:]+(系|組)[:digit:])
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,[:graph:]+(系|組)[:digit:])
# majorGradeCombos
majorGradeCombos=c(courseStructure$應修系級)
majorGradeCombos=str_extract_all(majorGradeCombos,[:graph:]+(系|組)[:digit:])
# tpe_highSchools
levels(tpe_highSchools)<-c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學","北一女")
tpe_highSchools[c(680,681,682,683,684,685,686,687,688,689)]<-c(rep("北一女", times = 10))
tpe_highSchools
# majorGradeCombos
regex_31<-"[:gragh:]+(系|組)[:digit:]"
str_extract(courseStructure$應修系級,"regex_31")
# majorGradeCombos
regex_31<-"[:gragh:]+(系)[:digit:]"
str_extract(courseStructure$應修系級,"regex_31")
# majorGradeCombos
regex_31<-"[:gragh:]+{系}[:digit:]"
str_extract(courseStructure$應修系級,"regex_31")
# majorGradeCombos
regex_31<-"[:gragh:]+{target_pattern}[:digit:]"
str_extract(courseStructure$應修系級,"regex_31")
# majorGradeCombos
regex_31<-"[:gragh:]+{target_pattern}[:digit:]"
str_extract_all(courseStructure$應修系級,"regex_31")
# majorGradeCombos
regex_31<-"[:gragh:]+{target_pattern}[:digit:]"
str_extract(courseStructure$應修系級,"regex_31")
# 目標是前面的唧唧
str_extract_all(
c("民國108年12月5日","民國98年10月5日"),
"(?<=民國)[0-9]{2,3}(?=年)"
) # 回傳list
str_extract(
c("民國108年12月5日","民國98年10月5日"),
"(?<=民國)[0-9]{2,3}(?=年)"
) # 回傳vector
# majorGradeCombos
regex<- "(?<=[:graph:])[\u4E00-\u9FFF](?=[:digit:])"
str_extract(courseStructure$應修系級,"regex")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?<=[:graph:])[\u4E00-\u9FFF](?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?<=[:graph:])[\u4E00-\u9FFF]+(?=[:digit:])")
View(data228)
View(data228)
View(courseStructure)
View(courseStructure)
# tpe_highSchools
levels(tpe_highSchools)<-c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學","北一女")
tpe_highSchools[c(680::689)]<-c(rep("北一女", times = 10))
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=>[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[系]+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+[:digit:](?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+[1-4](?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])([\u4E00-\u9FFF]+[:digit:])(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:]){[\u4E00-\u9FFF]+[:digit:]}(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+[:digit:](?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+1(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]++(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])"[\u4E00-\u9FFF]+1"(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])"[\u4E00-\u9FFF]"(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF](?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=[:digit:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+(?=[:graph:])")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[\u4E00-\u9FFF]+")
# majorGradeCombos
str_extract(courseStructure$應修系級,"(?=[:graph:])[:graph:]+")
check_regexRestriction("臺台北市立第一女子高級中學",regex_hs1st)
# regex_hs1st
regex_hs1st<-("台?臺?北?市?立?第?一女(子)?高?級?中?學?")
# regex_hs1st
regex_hs1st<-("台?臺?北?市?立?第?一女(子)?高?級?中?學?")
regex_hs1st
# regex_hs1st
regex_hs1st<-("台?臺?北?市?立?第?一女(子)?高?級?中?學?")
regex
# tpe_highSchools
levels(tpe_highSchools)<-c("臺北市立第一女中","台北市立第一女子高級中學","中山女中","中山女高", "台北市立中山女中", "臺北市立中山女子高級中學","國立政大附中", "國立政治大學附屬高級中學","北一女")
tpe_highSchools[c(680,681,682,683,684,685,686,687,688,689)]<-c(rep("北一女", times = 10))
tpe_highSchools
# regex_hs1st
regex_hs1st<-("台?臺?北?市?立?第?一女(子)?高?級?中?學?")
check_regexRestriction("臺台北市立第一女子高級中學",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"北一女") -> levels(tpe_highSchools)
levels(tpe_highSchools)
check_regexRestriction("臺台北市立第一女子高級中學",regex_hs1st)
currentLevels <- levels(tpe_highSchools)
str_replace(currentLevels,regex_hs1st,"北一女") -> levels(tpe_highSchools)
levels(tpe_highSchools)
levels(tpe_highSchools)
check_regexRestriction("高級中學",regex_hsTitle)
# regex_hsTitle
regex_hs1st
# regex_hsTitle
regex_hsTitle
# regex_hsTitle
regex_hsTitle<-("中$|高$|高級中學$")
check_regexRestriction("高級中學",regex_hsTitle)
currentLevels <- levels(tpe_highSchools)
str_remove(
currentLevels,regex_hsTitle
) -> levels(tpe_highSchools)
levels(tpe_highSchools)
levels(tpe_highSchools)
# majorGradeCombos
majorGradeCombos=str_extract(courseStructure$應修系級,"(?=[:graph:])[:graph:]+")
majorGradeCombos=unique(majorGradeCombos)
# majorGradeCombos
majorGradeCombos=str_extract(courseStructure$應修系級,"(?=[:graph:])[:graph:]+")
majorGradeCombos=unique(majorGradeCombos)
majorGradeCombos
# econ101junior
econ101junior=courseStructure$學年[104]
# econ101junior
econ101junior=courseStructure$學年[104]
econ101junior
# econ101junior
econ101junior=courseStructure$學年
econ101junior
# econ101junior
econ101junior=courseStructure$學年[[104]]
econ101junior
jsonlite::fromJSON(
"https://www.dropbox.com/s/jckqryeh5zeat5w/regionPopulation.json?dl=1"
) -> population
unlist(population) -> population
# majorGradeCombos
majorGradeCombos=str_extract(courseStructure$應修系級,"(?=[:graph:])[:graph:]+")
majorGradeCombos=unlist(majorGradeCombos)
majorGradeCombos=unique(majorGradeCombos)
majorGradeCombos
# majorGradeCombos
majorGradeCombossss=str_extract(courseStructure$應修系級,"(?=[:graph:])[:graph:]+")
majorGradeComboss=unlist(majorGradeCombossss)
majorGradeCombos=unique(majorGradeComboss)
majorGradeCombos
# majorGradeCombos
majorGradeCombossss=str_extract(courseStructure$應修系級,"(?=[:graph:])[:graph:]+")
majorGradeComboss=strsplit(majorGradeCombossss)
# majorGradeCombos
majorGradeCombossss=str_extract(courseStructure$應修系級,"(?=[:graph:])[:graph:]+")
majorGradeComboss=str_split(majorGradeCombossss)
# majorGradeCombos
majorGradeCombos=str_extract(courseStructure$應修系級,"(?=[:graph:])[:graph:]+")
majorGradeCombos=str_split(majorGradeCombos)
# majorGradeCombos
str_split(courseStructure$應修系級,"、") %>%
unlist(.)->aaaaa
map(aaaaa,~str_extract(.x,"([:graph:])+[系|組]+([:digit:])")) %>%
unique(.)%>%
unlist(.)->majorGradeCombos
majorGradeCombos[c(-3)]->majorGradeCombos
majorGradeCombos
# data228[c("全宗名編號","年")]
pick_note<-data228$`檔號`[data228$`附註`=="表冊名稱:臺灣省二二八事變正法及死亡人犯名冊"]
pick_name<-data228$`個人名稱`[data228$檔號==pick_note]
victims<-levels(factor(pick_name))
victims
# victims
"全宗名編號"<-str_extract(data228$"檔號","[:upper:][:graph:]+[:upper:](?=/)")
"全宗名編號"<-factor("全宗名編號")
"年"<-str_extract(data228$"檔號","(?<=/)[:alnum:]{4}(?=/)")
"年"<-as.integer("年")
data228[["全宗名編號"]]<-"全宗名編號"
data228[["年"]]<-"年"
data228[c("全宗名編號","年")]
# victims
pick_note<-data228$檔號[data228$附註=="表冊名稱:臺灣省二二八事變正法及死亡人犯名冊"]
pick_name<-data228$個人名稱[data228$檔號==pick_note]
victims<-levels(factor(pick_name))
victims
# data228[c("全宗名編號","年")]
"全宗名編號"<-str_extract(data228$檔號,"[:upper:][:graph:]+[:upper:](?=/)")
"全宗名編號"<-factor("全宗名編號")
"年"<-str_extract(data228$檔號,"(?<=/)[:alnum:]{4}(?=/)")
"年"<-as.integer("年")
data228[["全宗名編號"]]<-"全宗名編號"
data228[["年"]]<-"年"
data228[c("全宗名編號","年")]
